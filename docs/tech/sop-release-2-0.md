# SOP: Release 2.0 - Загрузка документов и улучшение поиска

[previous sections remain unchanged...]

### 1.2. Обновление raggen-web
- [x] Рефакторинг работы с базой данных
  - [x] Разделение монолитного database.ts на отдельные репозитории
  - [x] Создание базового класса BaseRepository
  - [x] Реализация ChatRepository для работы с чатами
  - [x] Реализация MessageRepository для работы с сообщениями
  - [x] Реализация EmbeddingRepository для работы с эмбеддингами
  - [x] Добавление тестов для каждого репозитория
  - [x] Улучшение обработки ошибок и валидации
- [x] Обновить схему Prisma для документов
  - [x] Создать модель Document
    - [x] Поля: id, name, type, size, content, createdAt, updatedAt
    - [x] Тестирование миграции
    - [x] Тестирование CRUD операций
  - [x] Решение по чанкам: обработка в памяти без сохранения в БД
    - [x] Анализ требований
    - [x] Обновление схемы
    - [ ] Тестирование подхода
- [x] Добавить компоненты загрузки файлов
  - [x] Создать компонент FileUpload
    - [x] Drag-and-drop интерфейс
    - [x] Валидация типов файлов
    - [x] Тестирование загрузки файлов
  - [ ] Создать API endpoint для загрузки
    - [ ] Интеграция с raggen-embed
    - [ ] Обработка ошибок
    - [ ] Тестирование endpoint
- [ ] Настроить базовое отображение документов
  - [ ] Создать компонент DocumentList
    - [ ] Отображение списка документов
    - [ ] Пагинация
    - [ ] Сортировка
    - [ ] Тестирование отображения
  - [ ] Создать компонент DocumentView
    - [ ] Просмотр содержимого документа
    - [ ] Метаданные документа
    - [ ] Тестирование просмотра
- [x] Обновить API для работы с документами
  - [x] Создать DocumentService
    - [x] Методы CRUD
    - [x] Обработка ошибок
    - [x] Тестирование сервиса
  - [ ] Создать API endpoints
    - [ ] GET /api/documents
    - [ ] GET /api/documents/:id
    - [ ] DELETE /api/documents/:id
    - [ ] Тестирование endpoints

[rest of the file remains unchanged...]
